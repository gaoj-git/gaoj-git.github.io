---
layout: mypost
title: 线上netty服务问题说明
categories: [Jekyll]
emoji: 🧐
---


## 现象
----------
线上部署了一个netty服务作为服务端，然后有970个客户端连接在上面，但是比较奇怪的现象是，每次线上其它服务发版本后这个服务就会出现大量的客户端掉线重新一直这样循环的现象，问题排查了有段时间，但是无果，由于测试环境很难模拟线上的环境，所以排查起来也是比较困难，并且线上的netty服务重启后便会恢复正常。

## 分析
------------------
netty服务端会往另一个tomcat部署的服务器发送http请求的心跳数据，http使用的是连接池完成